RewriteEngine On
RewriteBase /

# Remove .php extension from URLs
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [NC,L]

# Redirect .php URLs to clean versions (GET/HEAD only)
RewriteCond %{REQUEST_METHOD} ^(GET|HEAD)$
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# Redirect /about to /modules/about/about.php
RewriteRule ^about/?$ modules/about/about.php [L]

# Redirect /about/history to /modules/about/history.php
RewriteRule ^about/history/?$ modules/about/history.php [L]

# Redirect /about/mission to /modules/about/mission.php
RewriteRule ^about/mission/?$ modules/about/mission.php [L]

# Handle missing trailing slashes
RewriteCond %{REQUEST_METHOD} ^(GET|HEAD)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.[^./]+$
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.+)$ $1/ [L,R=301]
